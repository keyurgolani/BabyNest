üçº BabyNest has been deployed successfully!

=============================================================================
                         GETTING STARTED
=============================================================================

1. Get the application URL:
{{- if .Values.api.ingress.enabled }}
{{- range $host := .Values.api.ingress.hosts }}
  {{- range .paths }}
  http{{ if $.Values.api.ingress.tls }}s{{ end }}://{{ $host.host }}{{ .path }}
  {{- end }}
{{- end }}
{{- else if contains "NodePort" .Values.api.service.type }}
  export NODE_PORT=$(kubectl get --namespace {{ .Release.Namespace }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ include "babynest.fullname" . }}-api)
  export NODE_IP=$(kubectl get nodes --namespace {{ .Release.Namespace }} -o jsonpath="{.items[0].status.addresses[0].address}")
  echo "API URL: http://$NODE_IP:$NODE_PORT"
{{- else if contains "LoadBalancer" .Values.api.service.type }}
  NOTE: It may take a few minutes for the LoadBalancer IP to be available.
        Watch the status with: kubectl get --namespace {{ .Release.Namespace }} svc -w {{ include "babynest.fullname" . }}-api
  
  export SERVICE_IP=$(kubectl get svc --namespace {{ .Release.Namespace }} {{ include "babynest.fullname" . }}-api --template "{{"{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}"}}")
  echo "API URL: http://$SERVICE_IP:{{ .Values.api.service.port }}"
{{- else if contains "ClusterIP" .Values.api.service.type }}
  kubectl --namespace {{ .Release.Namespace }} port-forward svc/{{ include "babynest.fullname" . }}-api {{ .Values.api.service.port }}:{{ .Values.api.service.port }}
  echo "API URL: http://127.0.0.1:{{ .Values.api.service.port }}"
{{- end }}

2. Access the API documentation:
   Once the application is running, visit:
   <API_URL>/api/v1/docs

=============================================================================
                         CONFIGURATION
=============================================================================

Database:
{{- if .Values.postgresql.enabled }}
  - PostgreSQL is deployed as part of this release
  - Host: {{ include "babynest.postgresql.host" . }}
  - Database: {{ include "babynest.postgresql.database" . }}
{{- else }}
  - Using external PostgreSQL at: {{ .Values.postgresql.external.host }}:{{ .Values.postgresql.external.port }}
{{- end }}

Cache:
{{- if .Values.redis.enabled }}
  - Redis is deployed as part of this release
  - Host: {{ include "babynest.redis.host" . }}
{{- else }}
  - Using external Redis at: {{ .Values.redis.external.host }}:{{ .Values.redis.external.port }}
{{- end }}

AI Insights:
{{- if .Values.ollama.enabled }}
  - Ollama is deployed for local AI processing
  - Model: {{ .Values.ollama.model }}
  - URL: {{ include "babynest.ollama.url" . }}
  
  To pull the model (if not already available):
  kubectl exec -it $(kubectl get pods -l "app.kubernetes.io/component=ollama" -o jsonpath="{.items[0].metadata.name}") -- ollama pull {{ .Values.ollama.model }}
{{- else }}
  - Ollama is not enabled. AI insights will not be available.
  - To enable, set ollama.enabled=true
{{- end }}

=============================================================================
                         HEALTH CHECKS
=============================================================================

Check the health of your deployment:

  # Liveness probe
  kubectl exec -it $(kubectl get pods -l "app.kubernetes.io/component=api" -o jsonpath="{.items[0].metadata.name}") -- wget -qO- http://localhost:{{ .Values.api.config.port }}{{ .Values.api.healthCheck.livenessPath }}

  # Readiness probe
  kubectl exec -it $(kubectl get pods -l "app.kubernetes.io/component=api" -o jsonpath="{.items[0].metadata.name}") -- wget -qO- http://localhost:{{ .Values.api.config.port }}{{ .Values.api.healthCheck.readinessPath }}

=============================================================================
                         MOBILE APP SETUP
=============================================================================

To connect the BabyNest mobile app to this instance:

1. Install the BabyNest app on your device
2. On first launch, enter the server URL:
{{- if .Values.api.ingress.enabled }}
{{- range $host := .Values.api.ingress.hosts }}
   http{{ if $.Values.api.ingress.tls }}s{{ end }}://{{ $host.host }}
{{- end }}
{{- else }}
   Use the API URL from step 1 above
{{- end }}
3. Create an account or log in

=============================================================================
                         TROUBLESHOOTING
=============================================================================

View logs:
  kubectl logs -f -l app.kubernetes.io/name={{ include "babynest.name" . }},app.kubernetes.io/component=api

Check pod status:
  kubectl get pods -l app.kubernetes.io/name={{ include "babynest.name" . }}

Describe deployment:
  kubectl describe deployment {{ include "babynest.fullname" . }}-api

=============================================================================

Thank you for using BabyNest! üçºüë∂

For more information, visit: https://github.com/babynest/babynest
